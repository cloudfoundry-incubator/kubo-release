---
name: kubernetes-system-specs

templates:
  bin/apply_rbac.erb: bin/apply_rbac
  bin/post-deploy: bin/post-deploy
  bin/post-start.erb: bin/post-start
  bin/deploy-specs.erb: bin/deploy-specs
  config/kubedns-svc.yml: config/kubedns-svc.yml
  config/kubedns-controller.yml.erb: config/kubedns-controller.yml
  config/influxdb.yml.erb: config/influxdb.yml
  config/heapster.yml.erb: config/heapster.yml
  config/kubernetes-dashboard.yml.erb: config/kubernetes-dashboard.yml
  config/rbac_policy.yml.erb: config/rbac_policy.yml
  config/storage-class-gce.yml: config/storage-class-gce.yml
  config/kubeconfig.erb: config/kubeconfig
  config/ca.pem.erb: config/ca.pem
  config/kubernetes-dashboard/kubernetes-dashboard.crt.erb: config/kubernetes-dashboard/kubernetes-dashboard.crt
  config/kubernetes-dashboard/kubernetes-dashboard.key.erb: config/kubernetes-dashboard/kubernetes-dashboard.key

packages:
- jq
- kubernetes

consumes:
- name: kube-apiserver
  type: kube-apiserver
- name: cloud-provider
  type: cloud-provider
  optional: true

properties:
  authorization-mode:
    description: The authorization mode for kube-apiserver. Should be 'abac' or 'rbac'
    default: rbac
  admin-username:
    description: The admin username for the Kubernetes cluster
  admin-password:
    description: The admin password for the Kubernetes cluster
  api-token:
    description: The token to access Kubernetes API
  wait-until-ready:
    description: Max time to wait in sec until pods is ready.
    default: 30
  wait-until-ready-int:
    description: Interval in sec. to check if a pod is ready
    default: 2
  tls.kubernetes:
    description: "Certificate and private key for the Kubernetes master"
  tls.kubernetes-dashboard:
    description: "Certificate and private key for the Kubernetes dashboard"
